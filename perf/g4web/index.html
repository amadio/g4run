<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://www.w3schools.com/lib/w3-colors-safety.css">
    <link rel="stylesheet" href="./style.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <title>Geant4 Performance Difference Report</title>
  </head>
  <body style="width:100vw; height:100vh;">
    <header class="w3-container w3-safety-blue">
      <h3>Geant4 Performance Difference Report</h3>
      <p id="commit" class="w3-small">Comparing version @before@ (before) and @after@ (after)</p>
    </header>
    <div class="w3-bar w3-dark-gray" style="padding: 0px 32px;">
      <button class="w3-bar-item w3-button w3-mobile" onclick="openTab('default-tab')">Home</button>
      <button class="w3-bar-item w3-button w3-mobile" onclick="openTab('flamegraph-tab')">Flamegraphs</button>
      <button class="w3-bar-item w3-button w3-mobile" onclick="openTab('treemap-tab')">Treemaps</button>
      <a class="w3-bar-item w3-button w3-mobile" href="metrics.html">Metrics Report</a>
    </div>
    <main class="w3-container w3-small">
      <div id="default-tab" class="w3-container tab" style="display:block">
        <div id="performance-difference"></div>
        <form style="display:flex; gap: 16px; flex-wrap: wrap; padding: 8px 0px">
          <select id="report-selection" class="w3-select w3-border" style="width:auto; padding: 8px 16px;"></select>
          <button type="submit" id="csv-download" class="w3-button w3-gray" >Download CSV</button>
        </form>
        <div id="html-table" class="w3-table-all w3-hoverable" style="display: block; overflow-x: scroll"></div>
      </div>

      <div id="flamegraph-tab" class="w3-container tab" style="display:none">
       <select id="flame-selection" class="w3-select w3-border"
       style="width:auto; margin: 8px 0; padding: 8px;"></select>
       <div id="flamegraph"><object type="image/svg+xml" id="flame-object"
       style="width: 100%;"></object></div>
      </div>

      <div id="treemap-tab" class="w3-container tab" style="display:none;">
        <form id="treemap-header" style="display:flex; align-items: center; gap: 16px; flex-wrap: wrap; padding: 8px 0px;">
          <select id="treemap-selection" class="w3-select w3-border" style="width:auto; padding: 8px 16px;"></select>
          <label>Color by</label>
          <input type="radio" id="absolute" name="change-type" checked="true">
          <label for="absolute">Absolute Change</label>
          <input type="radio" id="relative" name="change-type">
          <label for="relative">Relative Change</label>
        </form>
        <div id="treemap"></div>
      </div>
    </main>
  </body>
  <script src="./script.js"></script>
  <script src="./diff-config.js" type="module"></script>
  <script src="./js/diff-report.js" type="module"></script>
  <script src="./js/diff-treemap.js" type="module"></script>
  <script src="./js/flamegraph.js" type="module"></script>
</html>
